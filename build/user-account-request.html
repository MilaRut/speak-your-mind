<!DOCTYPE html>
<html lang="ru">

<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="description" content="Speak your mind">
  <title>Speak your mind</title>
  <link rel="icon" type="image/x-icon" href="./favicon.ico">
  <link rel="icon" type="image/png" sizes="32x32" href="./img/favicon/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="16x16" href="./img/favicon/favicon-16x16.png">
  <link rel="apple-touch-icon" sizes="180x180" href="./img/favicon/apple-touch-icon.png">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/swiper@10/swiper-bundle.min.css">
  <link rel="stylesheet" href="css/style.min.css">
</head>

<body>
  <div class="wrapper internal">
    <main>
      <section class="user-account">
        <div class="container">
          <div class="user-account__wrapper">
            <div class="user-account__left-col">
              <nav class="user-account__nav">
                <div class="user-account__nav-logo">
                  <a href="user-account-main.html">
                    <img src="./img/svg/nav-logo.svg" width="72" height="72" alt="Speak your mind.">
                  </a>
                </div>
                <a href="user-account-main.html" class="user-account__nav-link is-active">
                  <svg width="25" height="25" fill="currentColor">
                    <use xlink:href="./img/sprite.svg#nav-main"></use>
                  </svg>
                  <span data-translate="int_nav_main">Главная</span>
                </a>
                <a href="user-account-payments.html" class="user-account__nav-link">
                  <svg width="25" height="25" fill="currentColor">
                    <use xlink:href="./img/sprite.svg#nav-payment"></use>
                  </svg>
                  <span data-translate="int_nav_payments">Платежи</span>
                </a>
                <a href="user-account-settings.html" class="user-account__nav-link is-active">
                  <svg width="25" height="25" fill="currentColor">
                    <use xlink:href="./img/sprite.svg#nav-settings"></use>
                  </svg>
                  <span data-translate="int_nav_profile">Профиль</span>
                </a>
                <a href="user-account-help.html" class="user-account__nav-link">
                  <svg width="25" height="25" fill="currentColor">
                    <use xlink:href="./img/sprite.svg#nav-help"></use>
                  </svg>
                  <span data-translate="int_nav_help">Помощь</span>
                </a>
                <div href="#" class="user-account__nav-link nav-lang-switcher js-dropdown-trigger"
                  data-id="#nav-lang-switcher">
                  <svg width="25" height="25" fill="currentColor">
                    <use xlink:href="./img/sprite.svg#nav-language"></use>
                  </svg>
                  <span class="current-language"></span>
                  <svg width="10" height="10" fill="currentColor">
                    <use xlink:href="./img/sprite.svg#dropdown"></use>
                  </svg>
                  </span>
                  <ul class="lang-switcher__list list-reset" id="nav-lang-switcher">
                    <!-- <li class="lang-switcher__item">
                      <a href="#" data-lang="hu">Hu</a>
                    </li> -->
                    <li class="lang-switcher__item">
                      <a href="#" data-lang="en">English</a>
                    </li>
                    <li class="lang-switcher__item">
                      <a href="#" data-lang="ru" data-translate="doc_q_language_ru">Русский</a>
                    </li>
                  </ul>
                </div>
                <a href="/doctor-landing.html" class="user-account__nav-link logout-btn">
                  <svg width="25" height="25" fill="currentColor">
                    <use xlink:href="./img/sprite.svg#nav-logout"></use>
                  </svg>
                  <span data-translate="int_nav_logout">Выход</span>
                </a>
              </nav>
            </div>
            <div class="user-account__right-col">
              <div class="user-account__rechoice">
                <section class="questions">
                  <div class="container">
                    <div class="questions__wrapper">
                      <div class="questions__heading">
                        <h1 class="subtitle" data-translate="rechoice_title_2">Изменение запроса</h1>
                        <p class="text-18" data-translate="rechoice_subtitle">Ответьте, пожалуйста на вопросы, чтобы мы
                          могли предложить вам подходящего
                          специалиста.
                        </p>
                      </div>
                      <form action="" method="post" id="user-rechoice-form">
                        <div class="questions__legend">
                          <p class="text-31" data-translate="questions_legend_1">Что бы вы хотели обсудить в первую
                            очередь?</p>
                          <p class="text-18" data-translate="questions_legend_2">Вы можете пропустить этот вопрос, если
                            не уверены
                            что именно вас беспокоит</p>
                        </div>
                        <div class="questions__checkboxes questions__checkboxes--1">
                          <p class="text-20" data-translate="symptoms_title_1">Отношения с собой</p>
                          <fieldset>
                            <div class="inputs-wrapper">
                              <label>
                                <input type="checkbox" id="symptoms_0" name="symptoms" value="0">
                                <span data-translate="symptoms_0">Усталость</span>
                              </label>
                              <label>
                                <input type="checkbox" id="symptoms_1" name="symptoms" value="1">
                                <span data-translate="symptoms_1">Депрессивные состояния</span>
                              </label>
                              <label>
                                <input type="checkbox" id="symptoms_2" name="symptoms" value="2">
                                <span data-translate="symptoms_2">Раздражительность</span>
                              </label>
                              <label>
                                <input type="checkbox" id="symptoms_3" name="symptoms" value="3">
                                <span data-translate="symptoms_3">Тревожность</span>
                              </label>
                            </div>
                            <div class="inputs-wrapper">
                              <label>
                                <input type="checkbox" id="symptoms_4" name="symptoms" value="4">
                                <span data-translate="symptoms_4">Панические атаки</span>
                              </label>
                              <label>
                                <input type="checkbox" id="symptoms_5" name="symptoms" value="5">
                                <span data-translate="symptoms_5">Самооценка</span>
                              </label>
                              <label>
                                <input type="checkbox" id="symptoms_6" name="symptoms" value="6">
                                <span data-translate="symptoms_6">Одиночество</span>
                              </label>
                              <label>
                                <input type="checkbox" id="symptoms_7" name="symptoms" value="7">
                                <span data-translate="symptoms_7">Поведенческая зависимость</span>
                              </label>
                            </div>
                            <div class="inputs-wrapper">
                              <label>
                                <input type="checkbox" id="symptoms_8" name="symptoms" value="8">
                                <span data-translate="symptoms_8">Химические зависимости</span>
                              </label>
                              <label>
                                <input type="checkbox" id="symptoms_9" name="symptoms" value="9">
                                <span data-translate="symptoms_9">Критические состояния</span>
                              </label>
                              <label>
                                <input type="checkbox" id="symptoms_10" name="symptoms" value="10">
                                <span data-translate="symptoms_10">ЛГБТ+</span>
                              </label>
                            </div>
                          </fieldset>
                        </div>
                        <div class="questions__checkboxes questions__checkboxes--2">
                          <p class="text-20" data-translate="symptoms_title_2">Отношения с другими</p>
                          <fieldset>
                            <div class="inputs-wrapper">
                              <label>
                                <input type="checkbox" id="symptoms_11" name="symptoms" value="11">
                                <span data-translate="symptoms_11">C партнером</span>
                              </label>
                              <label>
                                <input type="checkbox" id="symptoms_12" name="symptoms" value="12">
                                <span data-translate="symptoms_12">С родителями</span>
                              </label>
                              <label>
                                <input type="checkbox" id="symptoms_13" name="symptoms" value="13">
                                <span data-translate="symptoms_13">Сексуальные</span>
                              </label>
                            </div>
                            <div class="inputs-wrapper">
                              <label>
                                <input type="checkbox" id="symptoms_14" name="symptoms" value="14">
                                <span data-translate="symptoms_14">В целом, с окружающими</span>
                              </label>
                              <label>
                                <input type="checkbox" id="symptoms_15" name="symptoms" value="15">
                                <span data-translate="symptoms_15">С детьми</span>
                              </label>
                              <label>
                                <input type="checkbox" id="symptoms_16" name="symptoms" value="16">
                                <span data-translate="symptoms_16">Сложности с ориентацией, ее поиск</span>
                              </label>
                            </div>
                          </fieldset>
                        </div>
                        <div class="questions__checkboxes questions__checkboxes--3">
                          <p class="text-20" data-translate="symptoms_title_3">Работа, учеба</p>
                          <fieldset>
                            <div class="inputs-wrapper">
                              <label>
                                <input type="checkbox" id="symptoms_17" name="symptoms" value="17">
                                <span data-translate="symptoms_17">Недостаток мотивации</span>
                              </label>
                              <label>
                                <input type="checkbox" id="symptoms_18" name="symptoms" value="18">
                                <span data-translate="symptoms_18">“Не знаю, чем хочу заниматься”</span>
                              </label>
                              <label>
                                <input type="checkbox" id="symptoms_19" name="symptoms" value="19">
                                <span data-translate="symptoms_19">Отсутствие цели</span>
                              </label>
                            </div>
                            <div class="inputs-wrapper">
                              <label>
                                <input type="checkbox" id="symptoms_20" name="symptoms" value="20">
                                <span data-translate="symptoms_20">Выгорание</span>
                              </label>
                              <label>
                                <input type="checkbox" id="symptoms_21" name="symptoms" value="21">
                                <span data-translate="symptoms_21">Прокрастинация</span>
                              </label>
                              <label>
                                <input type="checkbox" id="symptoms_22" name="symptoms" value="22">
                                <span data-translate="symptoms_22">Смена, потеря работы</span>
                              </label>
                            </div>
                          </fieldset>
                        </div>
                        <div class="questions__checkboxes questions__checkboxes--4">
                          <p class="text-20" data-translate="symptoms_title_4">События жизни</p>
                          <fieldset>
                            <div class="inputs-wrapper">
                              <label>
                                <input type="checkbox" id="symptoms_23" name="symptoms" value="23">
                                <span data-translate="symptoms_23">Переезд, эмиграция</span>
                              </label>
                              <label>
                                <input type="checkbox" id="symptoms_24" name="symptoms" value="24">
                                <span data-translate="symptoms_24">Разрыв отношений, развод</span>
                              </label>
                              <label>
                                <input type="checkbox" id="symptoms_25" name="symptoms" value="25">
                                <span data-translate="symptoms_25">Утрата близкого человека</span>
                              </label>
                            </div>
                            <div class="inputs-wrapper">
                              <label>
                                <input type="checkbox" id="symptoms_26" name="symptoms" value="26">
                                <span data-translate="symptoms_26">Беременность, рождение ребенка</span>
                              </label>
                              <label>
                                <input type="checkbox" id="symptoms_27" name="symptoms" value="27">
                                <span data-translate="symptoms_27">Финансовые изменения</span>
                              </label>
                              <label>
                                <input type="checkbox" id="symptoms_28" name="symptoms" value="28">
                                <span data-translate="symptoms_28">Болезнь, своя или близких</span>
                              </label>
                            </div>
                          </fieldset>
                        </div>
                        <hr>
                        <div class="questions__radio questions__type">
                          <p class="text-20" data-translate="therapy_type">Какой тип терапии вас интересует?</p>
                          <div class="inputs-wrapper">
                            <input type="radio" id="type-individual" name="type" value="0" checked>
                            <label for="type-individual">
                              <svg width="18" height="18" fill="currentColor">
                                <use xlink:href="./img/sprite.svg#check-mark"></use>
                              </svg>
                              <span class="text-14" data-translate="therapy_type_individual">Индивидуальная</span>
                            </label>
                            <input type="radio" id="type-couples" name="type" value="1">
                            <label for="type-couples">
                              <svg width="18" height="18" fill="currentColor">
                                <use xlink:href="./img/sprite.svg#check-mark"></use>
                              </svg>
                              <span class="text-14" data-translate="therapy_type_couples">Парная</span>
                            </label>
                          </div>
                        </div>
                        <hr>
                        <div class="questions__radio questions__therapist-gender">
                          <p class="text-20" data-translate="therapist_gender">С кем вам было бы комфортнее работать?
                          </p>
                          <div class="inputs-wrapper">
                            <input type="radio" id="gender-female" name="therapist-gender" value="1" checked>
                            <label for="gender-female">
                              <svg width="18" height="18" fill="currentColor">
                                <use xlink:href="./img/sprite.svg#check-mark"></use>
                              </svg>
                              <span class="text-14" data-translate="therapist_gender_female">С женщиной</span>
                            </label>
                            <div class="divider"></div>
                            <input type="radio" id="gender-male" name="therapist-gender" value="0">
                            <label for="gender-male">
                              <svg width="18" height="18" fill="currentColor">
                                <use xlink:href="./img/sprite.svg#check-mark"></use>
                              </svg>
                              <span class="text-14" data-translate="therapist_gender_male">С мужчиной</span>
                            </label>
                            <div class="divider"></div>
                            <input type="radio" id="gender-any" name="therapist-gender" value="2">
                            <label for="gender-any">
                              <svg width="18" height="18" fill="currentColor">
                                <use xlink:href="./img/sprite.svg#check-mark"></use>
                              </svg>
                              <span class="text-14" data-translate="therapist_gender_any">Все равно</span>
                            </label>
                          </div>
                        </div>
                        <hr>
                        <div class="questions__radio questions__language">
                          <p class="text-20" data-translate="preferred_language">На каком языке вы хотите получать
                            терапию?</p>
                          <div class="inputs-wrapper">
                            <input type="radio" id="session_lang_ru" name="language" value="0" checked>
                            <label for="session_lang_ru">
                              <svg width="18" height="18" fill="currentColor">
                                <use xlink:href="./img/sprite.svg#check-mark"></use>
                              </svg>
                              <span class="text-14" data-translate="lang_russian">На русском</span>
                            </label>
                            <div class="divider"></div>
                            <input type="radio" id="session_lang_en" name="language" value="1">
                            <label for="session_lang_en">
                              <svg width="18" height="18" fill="currentColor">
                                <use xlink:href="./img/sprite.svg#check-mark"></use>
                              </svg>
                              <span class="text-14">in English</span>
                            </label>
                            <div class="divider"></div>
                            <input type="radio" id="session_lang_hu" name="language" value="2">
                            <label for="session_lang_hu">
                              <svg width="18" height="18" fill="currentColor">
                                <use xlink:href="./img/sprite.svg#check-mark"></use>
                              </svg>
                              <span class="text-14">magyarul</span>
                            </label>
                          </div>
                        </div>
                        <hr>
                        <div class="questions__radio questions__therapy-time">
                          <p class="text-20" data-translate="questions_therapy_time">Предпочтения по времени сессии</p>
                          <div class="inputs-wrapper">
                            <input type="radio" id="time-any" name="time" value="0" checked>
                            <label for="time-any">
                              <svg width="18" height="18" fill="currentColor">
                                <use xlink:href="./img/sprite.svg#check-mark"></use>
                              </svg>
                              <span class="text-14" data-translate="questions_therapy_time_any">Любое</span>
                            </label>
                            <div class="divider"></div>
                            <input type="radio" id="time-soon" name="time" value="1">
                            <label for="time-soon">
                              <svg width="18" height="18" fill="currentColor">
                                <use xlink:href="./img/sprite.svg#check-mark"></use>
                              </svg>
                              <span class="text-14" data-translate="questions_therapy_time_closest">Ближайшее</span>
                            </label>
                            <div class="divider"></div>
                            <input type="radio" id="time-specific" name="time" value="2">
                            <label for="time-specific">
                              <svg width="18" height="18" fill="currentColor">
                                <use xlink:href="./img/sprite.svg#check-mark"></use>
                              </svg>
                              <span class="text-14" data-translate="questions_therapy_time_specific">Конкретное</span>
                            </label>
                          </div>
                          <div class="time-specific-choose">
                            <label for="specific_date_time">
                              <span data-translate="specific_date_time">Выберите дату и время</span>
                              <input type="datetime-local" name="specific_date_time" id="specific_date_time">
                            </label>
                          </div>
                        </div>
                        <hr>
                        <div class="questions__radio questions__therapy-price">
                          <p class="text-20" data-translate="questions_therapy_price">Какая цена за сессию будет для вас
                            комфортна?</p>
                          <div class="inputs-wrapper">
                            <input type="radio" id="price-any" name="price" value="0" checked>
                            <label for="price-any">
                              <svg width="18" height="18" fill="currentColor">
                                <use xlink:href="./img/sprite.svg#check-mark"></use>
                              </svg>
                              <span class="text-14" data-translate="questions_therapy_price_any">Не важно</span>
                            </label>
                            <div class="divider"></div>
                            <input type="radio" id="price-10000" name="price" value="1">
                            <label for="price-10000">
                              <svg width="18" height="18" fill="currentColor">
                                <use xlink:href="./img/sprite.svg#check-mark"></use>
                              </svg>
                              <span class="text-14">10 000 HUF</span>
                            </label>
                            <div class="divider"></div>
                            <input type="radio" id="price-25000" name="price" value="2">
                            <label for="price-25000">
                              <svg width="18" height="18" fill="currentColor">
                                <use xlink:href="./img/sprite.svg#check-mark"></use>
                              </svg>
                              <span class="text-14">25 000 HUF</span>
                            </label>
                            <div class="divider"></div>
                            <input type="radio" id="price-40000" name="price" value="3">
                            <label for="price-40000">
                              <svg width="18" height="18" fill="currentColor">
                                <use xlink:href="./img/sprite.svg#check-mark"></use>
                              </svg>
                              <span class="text-14">40 000 HUF</span>
                            </label>
                          </div>
                        </div>
                        <hr>
                        <div class="questions__btn-wrapper">
                          <!-- <a href="user-account-main.html" class="btn btn--white questions__btn"
                            data-translate="back_to_profile">Вернуться в личный кабинет</a> -->
                          <button type="submit" class="questions__btn btn"
                            data-translate="questions_submit_btn">Продолжить</button>
                        </div>
                      </form>
                    </div>
                  </div>
                </section>
              </div>
            </div>
          </div>
      </section>
    </main>
    <footer class="footer">
      <div class="container">
        <div class="footer__left"></div>
        <div class="footer__copyright">
          <span>&copy; Speak Your Mind 2023</span>
          <a href="terms.html" class="text-green" data-translate="terms">Условия предоставления услуг</a>
        </div>
      </div>
    </footer>
  </div>

  <script>
    document.addEventListener('DOMContentLoaded', function () {

      const session_token = localStorage.getItem('token');

      // отправка формы смены запроса
      document.getElementById('user-rechoice-form').addEventListener('submit', function (e) {
        e.preventDefault();

        const user_symptoms = Array.from(document.querySelectorAll('input[name="symptoms"]:checked')).map(checkbox => Number(checkbox.value));
        const user_type = Number(document.querySelector('input[name="type"]:checked').value);
        const user_therapist_gender = Number(document.querySelector('input[name="therapist-gender"]:checked').value);
        const user_languages = Array.from(document.querySelectorAll('input[name="language"]:checked')).map(checkbox => Number(checkbox.value));
        const user_time = document.querySelector('input[name="time"]:checked').value;
        const user_specific_date_time = document.querySelector('input[name="specific_date_time"]').value;
        const user_price = Number(document.querySelector('input[name="price"]:checked').value);

        const dataToSend = {
          session_token: session_token,
          user_type: user_type,
          user_symptoms: user_symptoms,
          user_therapist_gender: user_therapist_gender,
          user_languages: user_languages,
          user_time: user_time,
          user_specific_date_time: user_specific_date_time,
          user_price: user_price
        };

        console.log(dataToSend);

        fetch('http://127.0.0.1:8000/update_client_request', {
          method: 'POST',
          headers: {
            'Content-Type': 'application/json'
          },
          body: JSON.stringify(dataToSend)
        })
          .then(response => {
            if (!response.ok) {
              throw new Error('Сеть не в порядке');
            }
            return response.json();
          })
          .then(data => {
            console.log('Данные пользователя обновлены');
            window.location.href = '/user-account-rechoice.html';
          })
          .catch(error => {
            console.error('Ошибка при получении данных пользователя:', error);
          });
      });
    });
  </script>

  <script src="js/vendor.min.js"></script>
  <script src="js/main.min.js"></script>
</body>

</html>
