<!DOCTYPE html>
<html lang="ru">

<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="description" content="Speak your mind">
  <title>Speak your mind</title>
  <link rel="icon" type="image/x-icon" href="./favicon.ico">
  <link rel="icon" type="image/png" sizes="32x32" href="./img/favicon/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="16x16" href="./img/favicon/favicon-16x16.png">
  <link rel="apple-touch-icon" sizes="180x180" href="./img/favicon/apple-touch-icon.png">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/swiper@10/swiper-bundle.min.css">
  <link rel="stylesheet" href="css/style.min.css">
</head>

<body>
  <div class="wrapper user-logged">
    <header class="header">
      <div class="container">
        <div class="header__logo">
          <div class="header__logo-wrapper">
            <img src="./img/svg/logo.svg" width="196" height="23" alt="Speak your mind.">
          </div>
        </div>
        <nav class="header__nav nav">
          <div class="nav__wrapper">
            <ul class="nav__list">
              <li class="nav__item nav__item--psychologists">
                <a class="nav__link" href="doctor-landing.html">Для психологов</a>
              </li>
              <li class="nav__item nav__item--businnes">
                <a class="nav__link" href="businnes-landing.html">Для бизнеса</a>
              </li>
              <li class="nav__item">
                <a class="nav__link" href="faq.html">FAQ</a>
              </li>
            </ul>
          </div>
        </nav>
        <div class="header__unlogged unlogged">
          <button type="button" class="js-dropdown-trigger unlogged__login-btn btn"
            data-id="#login-wrapper">Вход</button>
          <div class="header__login-wrapper" id="login-wrapper">
            <a class="text-18" href="user-login.html">Вход для клиентов</a>
            <a class="text-18" href="doctor-login.html">Вход для психологов</a>
          </div>
          <button type="button" class="js-dropdown-trigger unlogged__signup-btn btn btn--white"
            data-id="#signup-wrapper">Регистрация</button>
          <div class="header__signup-wrapper" id="signup-wrapper">
            <a class="text-18" href="user-signup-start.html">Регистрация для клиентов</a>
            <a class="text-18" href="doctor-signup.html">Регистрация для психологов</a>
          </div>
        </div>
        <div class="header__lang-switcher lang-switcher">
          <button class="lang-switcher__btn js-dropdown-trigger" data-id="#lang-switcher">
            <span>Русский</span>
            <svg width="10" height="10" fill="currentColor">
              <use xlink:href="./img/sprite.svg#dropdown"></use>
            </svg>
          </button>
          <ul class="lang-switcher__list list-reset" id="lang-switcher">
            <li class="lang-switcher__item">
              <a href="#">Hu</a>
            </li>
            <li class="lang-switcher__item">
              <a href="#">En</a>
            </li>
            <li class="lang-switcher__item">
              <a href="#">Ru</a>
            </li>
          </ul>
        </div>
        <div class="header__logged logged">
          <div class="logged__wrapper">
            <div class="logged__user-thumb">
              <img src="./img/content/user-thumb.png" width="24" height="24" alt="">
            </div>
            <button class="logged__btn js-dropdown-trigger" data-id="#logged-menu">
              <span class="logged__username gotten-username"></span>
              <svg width="10" height="10" fill="currentColor">
                <use xlink:href="./img/sprite.svg#dropdown"></use>
              </svg>
            </button>
            <ul class="logged__menu-list list-reset" id="logged-menu">
              <li class="logged__menu-item">
                <a href="#">Выйти</a>
              </li>
            </ul>
          </div>
        </div>
      </div>
    </header>
    <main class="signup-main">
      <div class="signup-header">
        <div class="container">
          <div class="signup-header__links">
            <a class="signup-header__link text-18 is-active" href="">Общие вопросы</a>
            <a class="signup-header__link text-18" href="user-signup-choice.html">Выбор терапевта</a>
            <a class="signup-header__link text-18" href="user-signup-payment.html">Оплата</a>
          </div>
        </div>
      </div>
      <section class="questions">
        <div class="container">
          <div class="questions__wrapper">
            <div class="questions__heading">
              <h1 class="subtitle">Добро пожаловать, <span class="gotten-username"></span>!</h1>
              <p class="text-18">Ответьте, пожалуйста на вопросы, чтобы мы могли предложить вам подходящего специалиста.
              </p>
            </div>
            <form action="" method="post" id="user-signup-main-form">
              <fieldset class="questions__main">
                <div class="questions__main-row questions__main-row--age">
                  <span class="text-20">Дата вашего рождения</span>
                  <div class="inputs-wrapper">
                    <input type="date" name="age" id="age">
                    <label for="age"></label>
                  </div>
                </div>
                <div class="questions__radio questions__main-row questions__main-row--experience">
                  <span class="text-20">Был ли у вас опыт терапии?</span>
                  <div class="inputs-wrapper">
                    <input type="radio" id="experience-yes" name="experience" value="yes" checked>
                    <label for="experience-yes">
                      <svg width="18" height="18" fill="currentColor">
                        <use xlink:href="./img/sprite.svg#check-mark"></use>
                      </svg>
                      <span class="text-14">Да</span>
                    </label>
                    <input type="radio" id="experience-no" name="experience" value="no">
                    <label for="experience-no">
                      <svg width="18" height="18" fill="currentColor">
                        <use xlink:href="./img/sprite.svg#check-mark"></use>
                      </svg>
                      <span class="text-14">Нет</span>
                    </label>
                  </div>
                </div>
                <div class="questions__radio questions__main-row questions__main-row--therapy-type">
                  <span class="text-20">Какой тип терапии вас интересует?</span>
                  <div class="inputs-wrapper">
                    <input type="radio" id="type-individual" name="type" value="type-individual" checked>
                    <label for="type-individual">
                      <svg width="18" height="18" fill="currentColor">
                        <use xlink:href="./img/sprite.svg#check-mark"></use>
                      </svg>
                      <span class="text-14">Индивидуальная</span>
                    </label>
                    <input type="radio" id="type-couples" name="type" value="type-couples">
                    <label for="type-couples">
                      <svg width="18" height="18" fill="currentColor">
                        <use xlink:href="./img/sprite.svg#check-mark"></use>
                      </svg>
                      <span class="text-14">Парная</span>
                    </label>
                  </div>
                </div>
                <div class="questions__main-row questions__main-row--language">
                  <p class="text-20">На каком языке вы хотели бы общаться?</p>
                  <div class="questions__checkboxes">
                    <div class="inputs-wrapper">
                      <label>
                        <input type="checkbox" id="lang-ru" name="language">
                        <span>русский</span>
                      </label>
                      <label>
                        <input type="checkbox" id="lang-ma" name="language">
                        <span>magyar</span>
                      </label>
                      <label>
                        <input type="checkbox" id="lang-en" name="language">
                        <span>english</span>
                      </label>
                    </div>
                  </div>
                </div>
              </fieldset>
              <div class="questions__legend">
                <p class="text-31">Что бы вы хотели обсудить в первую очередь?</p>
                <p class="text-18">Вы можете пропустить этот вопрос, если не уверены что именно вас беспокоит</p>
              </div>
              <div class="questions__checkboxes questions__checkboxes--1">
                <p class="text-20">Отношения с собой</p>
                <fieldset>
                  <div class="inputs-wrapper">
                    <label>
                      <input type="checkbox" id="checkbox1-1" name="checkbox1-1" value="0">
                      <span>Усталость</span>
                    </label>
                    <label>
                      <input type="checkbox" id="checkbox1-2" name="checkbox1-2" value="1" checked>
                      <span>Депрессивные состояния</span>
                    </label>
                    <label>
                      <input type="checkbox" id="checkbox1-3" name="checkbox1-3" value="2">
                      <span>Раздражительность</span>
                    </label>
                    <label>
                      <input type="checkbox" id="checkbox1-4" name="checkbox1-4" value="3">
                      <span>Тревожность</span>
                    </label>
                  </div>
                  <div class="inputs-wrapper">
                    <label>
                      <input type="checkbox" id="checkbox1-5" name="checkbox1-5" value="4">
                      <span>Панические атаки</span>
                    </label>
                    <label>
                      <input type="checkbox" id="checkbox1-6" name="checkbox1-6" value="5">
                      <span>Самооценка</span>
                    </label>
                    <label>
                      <input type="checkbox" id="checkbox1-7" name="checkbox1-7" value="6" checked>
                      <span>Одиночество</span>
                    </label>
                    <label>
                      <input type="checkbox" id="checkbox1-8" name="checkbox1-8" value="7">
                      <span>Поведенческая зависимость</span>
                    </label>
                  </div>
                  <div class="inputs-wrapper">
                    <label>
                      <input type="checkbox" id="checkbox1-9" name="checkbox1-9" value="8">
                      <span>Химические зависимости</span>
                    </label>
                    <label>
                      <input type="checkbox" id="checkbox1-10" name="checkbox1-10" value="9">
                      <span>Критические состояния</span>
                    </label>
                    <label>
                      <input type="checkbox" id="checkbox1-11" name="checkbox1-11" value="10">
                      <span>ЛГБТ+</span>
                    </label>
                  </div>
                </fieldset>
              </div>
              <div class="questions__checkboxes questions__checkboxes--2">
                <p class="text-20">Отношения с другими</p>
                <fieldset>
                  <div class="inputs-wrapper">
                    <label>
                      <input type="checkbox" id="checkbox2-1" name="checkbox2-1" checked>
                      <span>C партнером</span>
                    </label>
                    <label>
                      <input type="checkbox" id="checkbox2-2" name="checkbox2-2">
                      <span>С родителями</span>
                    </label>
                    <label>
                      <input type="checkbox" id="checkbox2-3" name="checkbox2-3">
                      <span>Сексуальные</span>
                    </label>
                  </div>
                  <div class="inputs-wrapper">
                    <label>
                      <input type="checkbox" id="checkbox2-4" name="checkbox2-4">
                      <span>В целом, с окружающими</span>
                    </label>
                    <label>
                      <input type="checkbox" id="checkbox2-5" name="checkbox2-5">
                      <span>С детьми</span>
                    </label>
                    <label>
                      <input type="checkbox" id="checkbox2-6" name="checkbox2-6">
                      <span>Сложности с ориентацией, ее поиск</span>
                    </label>
                  </div>
                </fieldset>
              </div>
              <div class="questions__checkboxes questions__checkboxes--3">
                <p class="text-20">Работа, учеба</p>
                <fieldset>
                  <div class="inputs-wrapper">
                    <label>
                      <input type="checkbox" id="checkbox3-1" name="checkbox3-1">
                      <span>Недостаток мотивации</span>
                    </label>
                    <label>
                      <input type="checkbox" id="checkbox3-2" name="checkbox3-2" checked>
                      <span>“Не знаю, чем хочу заниматься”</span>
                    </label>
                    <label>
                      <input type="checkbox" id="checkbox3-3" name="checkbox3-3">
                      <span>Отсутствие цели</span>
                    </label>
                  </div>
                  <div class="inputs-wrapper">
                    <label>
                      <input type="checkbox" id="checkbox3-4" name="checkbox3-4">
                      <span>Выгорание</span>
                    </label>
                    <label>
                      <input type="checkbox" id="checkbox3-5" name="checkbox3-5">
                      <span>Прокрастинация</span>
                    </label>
                    <label>
                      <input type="checkbox" id="checkbox3-6" name="checkbox3-6">
                      <span>Смена, потеря работы</span>
                    </label>
                  </div>
                </fieldset>
              </div>
              <div class="questions__checkboxes questions__checkboxes--4">
                <p class="text-20">События жизни</p>
                <fieldset>
                  <div class="inputs-wrapper">
                    <label>
                      <input type="checkbox" id="checkbox4-1" name="checkbox4-1">
                      <span>Переезд, эмиграция</span>
                    </label>
                    <label>
                      <input type="checkbox" id="checkbox4-2" name="checkbox4-2" checked>
                      <span>Разрыв отношений, развод</span>
                    </label>
                    <label>
                      <input type="checkbox" id="checkbox4-3" name="checkbox4-3">
                      <span>Утрата близкого человека</span>
                    </label>
                  </div>
                  <div class="inputs-wrapper">
                    <label>
                      <input type="checkbox" id="checkbox4-4" name="checkbox4-4">
                      <span>Беременность, рождение ребенка</span>
                    </label>
                    <label>
                      <input type="checkbox" id="checkbox4-5" name="checkbox4-5">
                      <span>Финансовые изменения</span>
                    </label>
                    <label>
                      <input type="checkbox" id="checkbox4-6" name="checkbox4-6">
                      <span>Болезнь, своя или близких</span>
                    </label>
                  </div>
                </fieldset>
              </div>
              <hr>
              <div class="questions__radio questions__therapist-gender">
                <p class="text-20">С кем вам было бы комфортнее работать?</p>
                <div class="inputs-wrapper">
                  <input type="radio" id="gender-female" name="therapist-gender" value="gender-female" checked>
                  <label for="gender-female">
                    <svg width="18" height="18" fill="currentColor">
                      <use xlink:href="./img/sprite.svg#check-mark"></use>
                    </svg>
                    <span class="text-14">С женщиной</span>
                  </label>
                  <div class="divider"></div>
                  <input type="radio" id="gender-male" name="therapist-gender" value="gender-male">
                  <label for="gender-male">
                    <svg width="18" height="18" fill="currentColor">
                      <use xlink:href="./img/sprite.svg#check-mark"></use>
                    </svg>
                    <span class="text-14">С мужчиной</span>
                  </label>
                  <div class="divider"></div>
                  <input type="radio" id="gender-any" name="therapist-gender" value="gender-any">
                  <label for="gender-any">
                    <svg width="18" height="18" fill="currentColor">
                      <use xlink:href="./img/sprite.svg#check-mark"></use>
                    </svg>
                    <span class="text-14">Все равно</span>
                  </label>
                </div>
              </div>
              <hr>
              <div class="questions__radio questions__therapy-time">
                <p class="text-20">Предпочтения по времени сессии</p>
                <div class="inputs-wrapper">
                  <input type="radio" id="time-any" name="time" value="time-any" checked>
                  <label for="time-any">
                    <svg width="18" height="18" fill="currentColor">
                      <use xlink:href="./img/sprite.svg#check-mark"></use>
                    </svg>
                    <span class="text-14">Любое</span>
                  </label>
                  <div class="divider"></div>
                  <input type="radio" id="time-soon" name="time" value="time-soon">
                  <label for="time-soon">
                    <svg width="18" height="18" fill="currentColor">
                      <use xlink:href="./img/sprite.svg#check-mark"></use>
                    </svg>
                    <span class="text-14">Ближайшее</span>
                  </label>
                  <div class="divider"></div>
                  <input type="radio" id="time-specific" name="time" value="time-specific">
                  <label for="time-specific">
                    <svg width="18" height="18" fill="currentColor">
                      <use xlink:href="./img/sprite.svg#check-mark"></use>
                    </svg>
                    <span class="text-14">Конкретное</span>
                  </label>
                </div>
              </div>
              <hr>
              <div class="questions__radio questions__therapy-price">
                <p class="text-20">Какая цена за сессию будет для вас комфортна?</p>
                <div class="inputs-wrapper">
                  <input type="radio" id="price-any" name="price" value="price-no-matter" checked>
                  <label for="price-any">
                    <svg width="18" height="18" fill="currentColor">
                      <use xlink:href="./img/sprite.svg#check-mark"></use>
                    </svg>
                    <span class="text-14">Не важно</span>
                  </label>
                  <div class="divider"></div>
                  <input type="radio" id="price-10000" name="price" value="price-10000">
                  <label for="price-10000">
                    <svg width="18" height="18" fill="currentColor">
                      <use xlink:href="./img/sprite.svg#check-mark"></use>
                    </svg>
                    <span class="text-14">10 000 HUF</span>
                  </label>
                  <div class="divider"></div>
                  <input type="radio" id="price-25000" name="price" value="price-25000">
                  <label for="price-25000">
                    <svg width="18" height="18" fill="currentColor">
                      <use xlink:href="./img/sprite.svg#check-mark"></use>
                    </svg>
                    <span class="text-14">25 000 HUF</span>
                  </label>
                  <div class="divider"></div>
                  <input type="radio" id="price-40000" name="price" value="price-40000">
                  <label for="price-40000">
                    <svg width="18" height="18" fill="currentColor">
                      <use xlink:href="./img/sprite.svg#check-mark"></use>
                    </svg>
                    <span class="text-14">40 000 HUF</span>
                  </label>
                </div>
              </div>
              <hr>
              <div class="questions__phone">
                <p class="text-20">Укажите пожалуйста ваш номер телефона (опционально, это нужно для экстренной связи с
                  вами в случае необходимости)</p>
                <input type="text" name="user-phone" id="user-phone" placeholder="Ваш номер телефона">
              </div>
              <div class="questions__btn-wrapper">
                <button type="submit" class="questions__btn btn">Продолжить</button>
              </div>
            </form>
          </div>
        </div>
      </section>
    </main>
    <footer class="footer">
      <div class="container">
        <div class="footer__copyright">
          <span>&copy;</span>
          <span>Speak Your Mind</span>
          <span>2023</span>
        </div>
      </div>
    </footer>
  </div>

  <div class="modal modal--preload" id="payment-terms">
    <div class="modal__wrapper">
      <div class="modal__overlay" data-close-modal></div>
      <div class="modal__content modal__content--new-card">
        <button class="modal__close-btn" type="button" aria-label="Закрыть окно." data-close-modal>
          <svg width="32" height="32" fill="currentColor">
            <use xlink:href="./img/sprite.svg#close-modal"></use>
          </svg>
        </button>
        <h2 class="modal__title text-31">Условия сервиса и автосписания</h2>
        <p class="modal__text text-18"> Пользователю доступна функция безналичной оплаты Видеоконсультаций, в этом
          случае «Speak your mind» действует по поручению соответствующего Психолога с привлечением уполномоченной
          платежной системы и является получателем платежа в качестве агента Психолога (далее – «безналичная оплата»).
        </p>
        <p class="modal__text text-18">«Speak your mind» не гарантирует отсутствия ошибок и сбоев в работе Сервиса в
          отношении предоставления
          возможности безналичной оплаты. Списание денежных средств за Видеоконсультацию осуществляется за 24 часа до
          момента проведения Видеоконсультации, а если Пользователь записался на Видеоконсультацию менее, чем за 24
          часа, то списание осуществляется за 12 часов до Видеоконсультации или в момент записи на Видеоконсультацию, в
          зависимости от того, что наступит ранее. В случае невозможности списания денежных средств за 12 часов до
          проведения Видеоконсультации, Видеоконсультация подлежит отмене.</p>
      </div>
    </div>
  </div>

  <script>
    document.addEventListener('DOMContentLoaded', function () {
      const userName = localStorage.getItem('user_name');
      document.querySelectorAll('.gotten-username').forEach((el) => {
        el.textContent = userName;
      });
    });

    document.getElementById('user-signup-main-form').addEventListener('submit', function (e) {
      e.preventDefault();
      window.location.href = '/user-signup-choice.html';

    });

    document.getElementById('user-signup-main-form').addEventListener('submit', function (e) {
      e.preventDefault();

      var user_name = document.getElementById('age').value;
      var user_experience = document.querySelector('input[name="experience"]:checked').value;
      var user_type = document.querySelector('input[name="type"]:checked').value;
      var user_languages = Array.from(document.querySelectorAll('input[name="language"]:checked')).map(checkbox => checkbox.value);
      var user_languages = Array.from(document.querySelectorAll('input[name="language"]:checked')).map(checkbox => checkbox.value);

      var data = {
        user_age: user_age,
        user_experience: user_experience,
        user_type: user_type,
        user_languages: user_languages,

      };

      fetch('http://127.0.0.1:8000/register', {
        method: 'POST',
        headers: {
          'Content-Type': 'application/json'
        },
        body: JSON.stringify(data)
      })
        .then(function (response) {
          if (!response.ok) {
            throw new Error('Network response was not ok');
          }
          return response.json();
        })
        .then(function (data) {
          localStorage.setItem('user_name', user_name);
          getToken({
            user_name: user_name,
            user_email: user_email,
            password: password,
          })
          console.log(data);
        })
        .catch(function (error) {
          console.error('Ошибка:', error);
          alert('Ошибка:', error)
          // Обработка ошибки
        });


      function getToken(loginData) {
        fetch('http://127.0.0.1:8000/login', {
          method: 'POST',
          headers: {
            'Content-Type': 'application/json'
          },
          body: JSON.stringify(loginData)
        })
          .then(function (response) {
            if (!response.ok) {
              throw new Error('Network response was not ok');
            }
            return response.json();
          })
          .then(function (data) {
            localStorage.setItem('token', data.token);
            window.location.href = '/user-signup-main.html';
            console.log(data);
          })
          .catch(function (error) {
            console.error('Ошибка:', error);
            // Обработка ошибки
          });
      }
    });
  </script>

  <script src="js/vendor.min.js"></script>
  <script src="js/main.min.js"></script>
</body>

</html>
