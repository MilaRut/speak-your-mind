<!DOCTYPE html>
<html lang="ru">

<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="description" content="Speak your mind">
  <title>Speak your mind</title>
  <link rel="icon" type="image/x-icon" href="./favicon.ico">
  <link rel="icon" type="image/png" sizes="32x32" href="./img/favicon/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="16x16" href="./img/favicon/favicon-16x16.png">
  <link rel="apple-touch-icon" sizes="180x180" href="./img/favicon/apple-touch-icon.png">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/swiper@10/swiper-bundle.min.css">
  <link rel="stylesheet" href="css/style.min.css">
</head>

<body>
  <div class="wrapper">
    <header class="header">
      <div class="container">
        <div class="header__logo">
          <div class="header__logo-wrapper">
            <svg width="196" height="24" fill="currentColor">
              <use xlink:href="./img/sprite.svg#logo"></use>
            </svg>
          </div>
        </div>
        <nav class="header__nav nav">
          <div class="nav__wrapper">
            <ul class="nav__list">
              <li class="nav__item nav__item--psychologists">
                <a class="nav__link" data-translate="nav_doc" href="doctor-landing.html"></a>
              </li>
              <!-- <li class="nav__item nav__item--businnes">
                <a class="nav__link href="businnes-landing.html" data-translate="nav_comp"></a>
              </li> -->
              <li class="nav__item">
                <a class="nav__link" href="faq.html">FAQ</a>
              </li>
            </ul>
          </div>
        </nav>
        <div class="header__lang-switcher lang-switcher">
          <button class="lang-switcher__btn js-dropdown-trigger" data-id="#lang-switcher">
            <span class="current-language"></span>
            <svg width="10" height="10" fill="currentColor">
              <use xlink:href="./img/sprite.svg#dropdown"></use>
            </svg>
          </button>
          <ul class="lang-switcher__list list-reset" id="lang-switcher">
            <!-- <li class="lang-switcher__item">
              <a href="#" data-lang="hu">Hu</a>
            </li> -->
            <li class="lang-switcher__item">
              <a href="#" data-lang="en">En</a>
            </li>
            <li class="lang-switcher__item">
              <a href="#" data-lang="ru">Ru</a>
            </li>
          </ul>
        </div>
        <div class="header__unlogged unlogged">
          <a class="unlogged__login-btn btn btn--white" data-translate="header_login_btn"></a>
          <a href="user-signup-start.html" class="unlogged__login-btn btn" data-translate="header_signup_btn"></a>
        </div>
        <div class="header__logged logged">
          <div class="logged__wrapper">
            <div class="logged__user-thumb">
              <img src="./img/content/user-thumb.png" width="24" height="24" alt="">
            </div>
            <button class="logged__btn" id="#logged-menu">
              <span class="logged__username gotten-username">Username</span>
            </button>
          </div>
        </div>
      </div>
    </header>
    <main class="signup-main">
      <div class="signup-header">
        <div class="container">
          <div class="signup-header__links">
            <a class="signup-header__link" href="user-signup-main.html" data-translate="signup_header_link_main">Общие
              вопросы</a>
            <a class="signup-header__link" href="user-signup-choice.html"
              data-translate="signup_header_link_choice">Выбор терапевта</a>
            <a class="signup-header__link is-active" href="#" data-translate="signup_header_link_payment">Оплата</a>
          </div>
        </div>
      </div>
      <section class="card">
        <div class="container">
          <div class="card__heading">
            <h2 class="title" data-translate="card_title">Привяжите карту для записи</h2>
          </div>
          <div class="card__description">
            <!-- .card__description-wrapper--start по умолчанию имеет класс .is-active.  При ошибке привязки карты, класс удаляется -->
            <div class="card__description-wrapper card__description-wrapper--start is-active">
              <p class="text-18 card__request-sent"><span data-translate="card_subtitle_1">Запрос на назначение сессии
                  на </span><span class="card__session-time">15:00 6 июля</span><span data-translate="card_subtitle_2">
                  отправлен.
                  Терапевт: </span><span class="card__doctor-name">Олеся Парада</span>.</p>
              <p class="text-25" data-translate="card_description_start_1">Что произойдет дальше?</p>
              <p class="text-18" data-translate="card_description_start_2">Терапевт подтвердит ваш запрос или предложит
                альтернативное время.</p>
              <p class="text-18" data-translate="card_description_start_3">Тем временем вам необходимо привязать к
                своему аккаунту банковскую карту. Деньги с нее
                списываются только тогда, когда вы записались на сессию – ровно за 12 часов.</p>
              <p class="text-25" data-translate="card_description_start_4">Почему деньги списываются до оказания услуги?
              </p>
              <p class="text-18" data-translate="card_description_start_5">У консультации с психологом существуют свои
                законы, в том числе и те, что
                регламентируют денежные отношения между терапевтом и клиентом. Один из таких законов гласит, что сессия,
                которую клиент пропускает, предупреждая об этом менее, чем за 12 часов, оплачивается. Это сделано для
                того, чтобы внести в психотерапию элемент дисциплины и избежать сопротивления, которое неизбежно
                возникает у клиента при приближении к потайным уголкам его психики. В этом случае, он начинает
                пропускать сессии, придумывая для того миллион причин – и, в итоге, никакой нормальной работы не
                получается, а получается одна ерунда. Вы ведь этого не хотите? Вот и мы не хотим.</p>
              <p class="text-25" data-translate="card_description_start_6">Что делать, если у меня поменялись планы
                после списания денег?</p>
              <p class="text-18" data-translate="card_description_start_7">К сожалению, ничего – если вы предупреждаете
                о переносе сессии позже, чем за 12 часов
                до её начала, то деньги не возвращаются.</p>
            </div>
            <!-- .card__description-wrapper--error по умолчанию скрыт. При ошибке привязки карты, добавлется класс .is-active -->
            <div class="card__description-wrapper card__description-wrapper--error">
              <div class="card__error-message">
                <p class="text-18" data-translate="card_description_error_1"><b>Произошла ошибка</b></p>
                <p class="text-18" data-translate="card_description_error_2">Не удалось привязать карту. Проверьте
                  данные карты и повторите попытку или привяжите другую карту</p>
              </div>
            </div>
          </div>
          <div class="card__card-info">
            <form action="" method="post" id="user-card-form">
              <fieldset>
                <label for="card-owner">
                  <span data-translate="card_owner_name">Имя владельца карты</span>
                  <input type="text" id="card-owner" placeholder="Имя на лицевой стороне карты"
                    data-translate="card_owner_name_placeholder">
                </label>
              </fieldset>
              <fieldset>
                <label for="card-number">
                  <span data-translate="card_number">Номер карты</span>
                  <input type="number" id="card-number" placeholder="x x x x    x x x x    x x x x    x x x x">
                </label>
              </fieldset>
              <fieldset>
                <label for="card-exp">
                  <span data-translate="card_exp">Срок действия</span>
                  <input type="number" id="card-exp" placeholder="m m  /  y y">
                </label>
                <label for="card-cvc">
                  <span data-translate="card_cvc">Код CVС</span>
                  <input type="number" id="card-cvc" maxlength="3" placeholder="x x x">
                </label>
              </fieldset>
              <p class="card__permission text-18">
                <span data-translate="card_permission_1">Добавляя карту вы принимаете</span>&nbsp;
                <a href="#" class="text-green" data-open-modal data-modal-id="#payment-terms"
                  data-translate="card_permission_2">условия сервиса</a>&nbsp;
                <span data-translate="card_permission_3">и разрешаете</span>&nbsp;
                <a href="#" class="text-green" data-open-modal data-modal-id="#payment-terms"
                  data-translate="card_permission_4">автосписания</a>
              </p>
              <button type="submit" class="card__submit-btn btn" data-translate="card_submit_btn">Добавить
                карту</button>
            </form>
          </div>
        </div>
      </section>
    </main>
    <footer class="footer">
      <div class="container">
        <div class="footer__left"></div>
        <div class="footer__copyright">
          <span>&copy; Speak Your Mind 2023</span>
          <a href="terms.html" class="text-green" data-translate="terms">Условия предоставления услуг</a>
        </div>
      </div>
    </footer>
  </div>

  <div class="modal modal--preload" id="payment-terms">
    <div class="modal__wrapper">
      <div class="modal__overlay" data-close-modal></div>
      <div class="modal__content modal__content--new-card">
        <button class="modal__close-btn" type="button" aria-label="Закрыть окно." data-close-modal>
          <svg width="32" height="32" fill="currentColor">
            <use xlink:href="./img/sprite.svg#close-modal"></use>
          </svg>
        </button>
        <h2 class="modal__title text-31" data-translate="payment_terms_title">Условия сервиса и автосписания</h2>
        <p class="modal__text text-18" data-translate="payment_terms_text_1"> Пользователю доступна функция безналичной
          оплаты Видеоконсультаций, в этом
          случае «Speak your mind» действует по поручению соответствующего Психолога с привлечением уполномоченной
          платежной системы и является получателем платежа в качестве агента Психолога (далее – «безналичная оплата»).
        </p>
        <p class="modal__text text-18" data-translate="payment_terms_text_2">«Speak your mind» не гарантирует отсутствия
          ошибок и сбоев в работе Сервиса в
          отношении предоставления возможности безналичной оплаты. Списание денежных средств за Видеоконсультацию
          осуществляется за 24 часа до момента проведения Видеоконсультации, а если Пользователь записался на
          Видеоконсультацию менее, чем за 24 часа, то списание осуществляется за 12 часов до Видеоконсультации или в
          момент записи на Видеоконсультацию, в зависимости от того, что наступит ранее. В случае невозможности списания
          денежных средств за 12 часов до проведения Видеоконсультации, Видеоконсультация подлежит отмене.</p>
      </div>
    </div>
  </div>

  <script>
    document.addEventListener('DOMContentLoaded', function () {
      const doc_name = localStorage.getItem('selected_therapist_name');
      const session_datetime = localStorage.getItem('session_datetime');
      document.querySelector('.card__doctor-name').textContent = doc_name;
      document.querySelector('.card__session-time').textContent = session_datetime;

      document.getElementById('user-card-form').addEventListener('submit', function (e) {
        e.preventDefault();
        // TODO когда будет добавлен блок с привязкой карты -
        const userForm = localStorage.getItem('user_form');
        const hasTherapist = localStorage.getItem('has_therapist');
        if (hasTherapist !== 'selected') {
          window.location.href = '/user-signup-choice.html';
        } else {
          window.location.href = '/user-account-settings.html?from=payment';
        }
      });

    });
  </script>

  <script src="js/vendor.min.js"></script>
  <script src="js/main.min.js"></script>
</body>

</html>
